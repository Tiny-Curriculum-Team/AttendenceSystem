# 工地作业环境的人数考勤统计

## 题目

**任务类型**：实时数据处理、批量数据处理

**开发平台**：Hadoop、HBase，Mapreduce等

**开发语言**：Java，Python

现有的工地人数统计通常通过负责人手动数，为了加快智慧工地的进程，设计基于大数据分析的智慧工地人数统计算法。
要求：
1. 结合所学爬虫知识爬取工地人物图像或采用现有工地人物数据集。
2. 使用图像标注工具labellmg将图像标注为voc格式，并对图像标签进行本地存储。
3. 利用图像和图像标签，训练一个目标检测神经网络（根据链接配置电脑环境并下载相关代码https://github.com/ultralytics/yolov5），将人员目标检测的结果保存到本地，通过大数据分析相关技术进行考勤统计。

## 题目思路

题目二的第一问用第一题的爬虫也可以，用其他的爬虫方法也可以，或者现有的公开的工地人物的数据也可以，当然尽量使用爬虫来做，这一问的任务主要就是收集数据。

第二问是对第一问的数据进行标注，使用图像标注工具labellmg将图像标注为voc格式，labellmg这个工具网上有教程，最后标注好后，把图像标签保存到本地就可以了

第三问是用目标检测算法来对刚刚我们前两问标注好的数据进行训练和检测，把检测结果保存到本地，然后用大数据框架去统计图片中的人数，用spark和MapReduce都可以，这个和第一题的第三问也比较类似。

## 项目设计

### 前端部分

核心任务：展示数据。

参考设计：
[考勤数据分析图表这么做才直观——九数云](https://www.jiushuyun.com/hywz/3676.html)

![](https://www.jiushuyun.com/wp-content/uploads/2022/07/%E8%80%83%E5%8B%A4%E6%83%85%E5%86%B5%E7%9C%8B%E6%9D%BF-1536x796.png)

### 后端部分

**数据库表的设计**：

？？？（暂时留坑，等晚饭回来填补）

MongoDB Atlas集群搭建与投入使用。

> Django备选依赖：pymongo, MongoEngine

**可计算的指标**：
1. 到勤率/出勤次数
2. 迟到率/迟到次数
3. 早退率/早退次数
4. 某段时间的工地人数

**功能**：
 - [ ] 获取视频流并输入模型
 - [ ] 调用模型算法进行推断
 - [ ] 得出结果后存入文件（初始考虑csv，但该考虑不成熟）
 - [ ] 完成存入文件后对数据进行分析，分析方向参考上述可计算指标
 - [ ] 将分析信息回馈给前端（触发更新数据）

### 模型算法部分

使用Yolo v8.

 - [ ] 数据清洗
 - [ ] 扩充数据集并标注（可选？大概率不选）
 - [ ] 数据预处理
 - [x] ~~模型训练~~
 - [ ] 模型优化（可选？大概率不选）
 - [ ] 模型推断API（重要）